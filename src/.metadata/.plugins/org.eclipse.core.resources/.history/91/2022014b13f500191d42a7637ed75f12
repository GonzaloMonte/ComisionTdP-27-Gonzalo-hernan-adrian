package Main;

import Personajes.*;

import java.util.ArrayList;
import java.util.Random;

import Personajes.*;
public class  Mapa {
	public static Celda[][] celdas;
	protected int Dinero;
	protected int Score;
	protected int Base;
	protected ArrayList<Entidad> listaEntidades;
	protected ArrayList<Entidad> listaAgregar;
	int k=0;
	protected Ventana ventana;
	public static Mapa mapa;
	
	
	public static Mapa obtenerMapa(Ventana ventana) {
	 if(mapa==null)
		mapa=new Mapa(ventana);
		 return mapa;
	}
	private Mapa(Ventana ventana) {
		this.ventana=ventana;
		Base=100;
		Dinero=100;
		Score=0;
		celdas= new Celda[20][20];
		for(int i= 0 ; i<celdas.length ; i++) {
			for(int j= 0 ; j<celdas[0].length ; j++) {
				celdas[i][j]= new Celda(i,j);
			}
		}
		
		
		listaEntidades=new ArrayList<Entidad>();
		listaAgregar=new ArrayList<Entidad>();
		
	}
	

	public int getDinero(){
		return Dinero;
	}
	
	public int getScore(){
		return Score;
	}
	
	public int getBase(){
		return Base;	
	}
	
	public void agregarEntidad(Entidad e) {		
		listaAgregar.add(e);
		celdas[e.getX()][e.getY()].agregarPersonaje(e);
		}	
	
	
	public void eliminarEnemigo(Entidad e) {
		listaEntidades.remove(e);
	}
	

	
	public ArrayList<Entidad> listaEntidades(){
		return listaEntidades;
	}
	
	 
	public void setDinero(int d){
		 Dinero-=d;
	}
	
	public void setScore(int s){
		 Score-=s;
	}
	
	public void setBase(int b){
		 Base-=b;	
	}

	public void agregarHeroes(int i,int j,String heroe) {
		Heroe colocar=null;
		if (heroe.equals("IronMan") && Dinero>=IronMan.getPrecio()) {
			colocar=new IronMan();
		}
		else if (heroe.equals("Thor")) {
			colocar=new Thor();
		}
			else if (heroe.equals("Hulk")) {
				colocar=new Hulk();
			}
				else if (heroe.equals("CapitanAmerica")) {
					colocar=new CapitanAmerica();
				}
					else if (heroe.equals("SpiderMan")) {
						colocar=new SpiderMan();
					}
		colocar.setX(i);
		colocar.setY(j);
		celdas[i][j].agregarPersonaje(colocar);
		listaEntidades.add(colocar);
		
		
		
	}
	public void crearEnemigoTanque() {
		Random r = new Random();
		int valorDado = r.nextInt(20);
		Entidad e=new  TanqueCr(valorDado);
		agregarEntidad(e);
	}
	
	public void ActualizarMapa() {
		for (Entidad e:listaEntidades) {
			e.actualizar();
			
		}
		for (Entidad e2: listaAgregar) {
			listaEntidades.add(e2);

		}
		listaAgregar=new ArrayList<Entidad>();
	}
}