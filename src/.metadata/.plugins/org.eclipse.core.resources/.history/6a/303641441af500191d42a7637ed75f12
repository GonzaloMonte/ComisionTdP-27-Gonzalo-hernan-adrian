package Personajes;
import Objetos.*;
import Visitor.Visitor;
import Visitor.VisitorEnemigo;

import javax.swing.JLabel;

import Main.*;
	
	public class Enemigo extends Entidad{
		protected int velocidad; //
		protected int recompensa;//por matarlo en monedas o dolar se suma al dinero del jugador
		protected int dato;//No ataca a la ciudad ,sino que es el daÃ±o  al llegar a la base.
		protected Objeto premio; // No todos los enemigos dan premios
		protected int tiempo;
		protected int daño;
		
		public Enemigo(int vida,int recompensa,int dato,int arranque){
			super(vida);
			this.recompensa=recompensa;
			this.dato=dato;
			visitor=new VisitorEnemigo();
			tiempo=velocidad;
			x=arranque;
			y=0;
			icono=new JLabel();
		}
		public Enemigo(int vida,int recompensa,int dato,Objeto p){
			 super(vida);
			 this.recompensa=recompensa;
			 this.dato=dato;
			 premio =p;
			 visitor=new VisitorEnemigo();
			 tiempo=velocidad;
			 icono=new JLabel();

			}
		
		public int getVelocidad(){
			return velocidad;
		}
		
		public int getRecompensa(){
			return recompensa;
		}
		
		public int getDato(){
			return dato;
		}
		/**
		 * 
		 * 
		 * @param a es el valor de daÃ±o del heroe que lo ataco
		 */
		public void atacado(int a){
			vida=vida-a;
		}

		
		public void mover(){
			if (tiempo==0) {
				if (y==yMax-1) {
					Mapa.mapa.dañoBase(daño);
					System.out.print(""+daño);
				}
				else
				if(!Mapa.celdas[x][y+1].ocupada() && y<yMax) {
					Mapa.celdas[x][y].liberarCelda();
					y=y+1;
				}
				else if (!Mapa.celdas[x+1][y].ocupada() && x<xMax) {
						Mapa.celdas[x][y].liberarCelda();	
						x=x+1;
					}
					else if (!Mapa.celdas[x-1][y].ocupada() && x>0) {
						Mapa.celdas[x][y].liberarCelda();	
						x=x-1;
					}
				
				Mapa.celdas[x][y].agregarPersonaje(this);
				tiempo=velocidad;
			}
			else tiempo=tiempo-1;

		}
		public void setVida(int i) {
			vida=i;
		}
		
		public void accept(Visitor v) {
			v.visitEnemigo(this);
			
		}

		public void actualizar() {
			mover();
			
		}
	
		public Visitor getVisitor() {
			
			return visitor;
		}

		public JLabel getLabel() {
			return icono;
		}
		
	}
